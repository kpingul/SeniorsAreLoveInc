!function(){"use strict";angular.module("CGDashBoard",["ui.router","file-model"]).run(["$rootScope","$templateCache",function(e,t){e.$on("$stateChangeSuccess",function(){$("html, body").animate({scrollTop:0},0)}),e.$on("$stateChangeStart",function(){$(".loading").css("display","block")}),e.$on("$stateChangeSuccess",function(){$(".loading").css("display","none")})}]).config(["$stateProvider","$urlRouterProvider","$locationProvider",function(e,t,r){t.when("","/profile"),e.state("careGiverProfile",{url:"/profile",templateUrl:"/public/src/js/app/CGDashBoard/templates/caregiver.profile.tpl.html",controller:"CGDashBoardCtrl"}).state("inbox",{url:"/inbox",templateUrl:"/public/src/js/app/CGDashBoard/templates/inbox.tpl.html"}).state("careGiverViewProfile",{url:"/viewProfile",templateUrl:"/public/src/js/app/CGDashBoard/templates/caregiver.profile.view.tpl.html"}).state("careGiverProfileEditPhoto",{url:"/profile/photo/",templateUrl:"/public/src/js/app/CGDashBoard/templates/caregiver.profile.photo.tpl.html"}).state("careGiverProfileEditInformation",{url:"/profile/information/",templateUrl:"/public/src/js/app/CGDashBoard/templates/caregiver.profile.information.tpl.html"}).state("careGiverProfileEditAbout",{url:"/profile/about/",templateUrl:"/public/src/js/app/CGDashBoard/templates/caregiver.profile.about.tpl.html"}).state("careGiverProfileEditServices",{url:"/profile/services/",templateUrl:"/public/src/js/app/CGDashBoard/templates/caregiver.profile.services.tpl.html"}).state("careGiverProfileEditExperience",{url:"/profile/experience",templateUrl:"/public/src/js/app/CGDashBoard/templates/caregiver.profile.experience.tpl.html"}).state("careGiverProfileSettings",{url:"/profile/settings",templateUrl:"/public/src/js/app/CGDashBoard/templates/caregiver.profile.settings.tpl.html"}).state("caregiverJobs",{url:"/caregiver-jobs",templateUrl:"/public/src/js/app/CGDashBoard/templates/caregiverJobs.tpl.html"}).state("caregiverJob",{url:"/caregiver-job/profile/:id",templateUrl:"/public/src/js/app/CGDashBoard/templates/caregiverJobProfile.tpl.html",controller:"CaregiverJobProfile"}).state("messageJob",{url:"/caregiver-job/message/:id",templateUrl:"/public/src/js/app/CGDashBoard/templates/messageJob.tpl.html",controller:"MessageJob"})}])}(),function(){"use strict";function e(){function e(e,t,r){r.data&&(document.getElementById(r.data.split(" ")[0]).onchange=function(){var e=new FileReader;e.onload=function(e){document.getElementById(r.data.split(" ")[1]).src=e.target.result},e.readAsDataURL(this.files[0])})}var t={restrict:"A",link:e};return t}angular.module("CGDashBoard").directive("previewImage",e)}(),function(){"use strict";angular.module("CGDashBoard").controller("CGDashBoardCtrl",["$scope","$location","APIService",function(e,t,r){e.workExp2=!1,e.informationSubmitted=!1,e.aboutSubmitted=!1,e.expSubmitted=!1,e.skillsExpSubmitted=!1,e.accountSubmitted=!1,e.photoSubmitted=!1,e.init=function(t){r.getCareGiver(JSON.parse(t)).then(function(t){e.user=t}),r.getMessages().then(function(t){e.messages=t}),r.getCareGiverJobs().then(function(t){e.activeJobs=t})},e.updateInformation=function(a){e.informationSubmitted=!0,r.updateInformation(e.user._id,e.user.cgActive,a,e.user.contact.address,e.user.contact.city,e.user.contact.zipCode).then(function(r){r&&(e.informationSubmitted=!1,e.user=r.data,t.path("/profile"))})},e.updateAbout=function(){e.aboutSubmitted=!0;var a={about:e.user.about};r.updateCareGiver(e.user._id,a).then(function(r){r&&(e.aboutSubmitted=!1,e.user=r.data,t.path("/profile"))})},e.updateExperience=function(){e.expSubmitted=!0;var a={yrsExp:e.user.yrsExp,title:e.user.profExp.title,employer:e.user.profExp.employer,start:e.user.profExp.start,end:e.user.profExp.end,desc:e.user.profExp.desc};r.updateCareGiver(e.user._id,a).then(function(r){r&&(e.expSubmitted=!1,e.user=r.data,t.path("/profile"))})},e.updateAllExperience=function(){e.expSubmitted=!0;var a={yrsExp:e.user.yrsExp,workExp:e.user.workExp};r.updateCareGiver(e.user._id,a).then(function(r){r&&(e.expSubmitted=!1,e.user=r.data,t.path("/profile"))})},e.updateAccount=function(){e.accountSubmitted=!0;var a={fName:e.user.fName,lName:e.user.lName,email:e.user.email,phone:e.user.phone};r.updateCareGiver(e.user._id,a).then(function(r){r&&(e.accountSubmitted=!1,e.user=r.data,t.path("/profile"))})},e.updateSkillsExp=function(){e.skillsExpSubmitted=!0;var a={hourRate:e.user.hourRate,careType:e.user.careType,skills:e.user.skills};r.updateCareGiverServices(e.user._id,a).then(function(r){r&&(e.skillsExpSubmitted=!1,e.user=r.data,t.path("/profile"))})},e.addSkill=function(t){""!=t&&(e.user.skills.push(t),e.user.newSkill="")},e.removeSkill=function(t){e.user.skills.splice(t,1)}}])}(),function(){"use strict";angular.module("CGDashBoard").controller("CaregiverJobProfile",["$scope","APIService","$stateParams",function(e,t,r){t.getJobProfile(r.id).then(function(t){e.caregiverJob=t})}])}(),function(){"use strict";angular.module("CGDashBoard").controller("MessageJob",["$scope","APIService","$stateParams","$timeout","$location",function(e,t,r,a,i){e.messageSubmitted=!1,e.jobId=r.id,e.sendMessage=function(){e.messageSubmitted=!0;var a={recipientId:r.id,message:e.message};t.sendMessageToJob(r.id,a).then(function(t){t&&(e.messageSubmitted=!1,i.path("/profile"))})}}])}(),function(){"use strict";angular.module("CGDashBoard").factory("APIService",["$http",function(e){function t(t){return e.get("/api/caregiver/"+t).then(function(e){return e.data})["catch"](l)}function r(){return e.get("/api/caregiverJobs").then(function(e){var t=_.filter(e.data,function(e,t){return 1==e.family.active});return t})["catch"](l)}function a(t){return e.get("/api/family/"+t).then(function(e){return e.data})["catch"](l)}function i(t,r){return e.post("/api/caregiver/"+t,r).then(function(e){return e})["catch"](l)}function o(t,r,a,i,o,s){var n={cgActive:r,gender:a,contact:{address:i,city:o,zipCode:s}};return e.post("/api/caregiver/"+t,n).then(function(e){return e})["catch"](l)}function s(t,r){return e.post("/api/caregiver/services/"+t,r).then(function(e){return e})["catch"](l)}function n(){return e.get("/api/messages").then(function(e){return e.data})["catch"](l)}function u(t,r){return e.post("/api/messages",r).then(function(e){return e.data})["catch"](l)}function l(e){console.log(e)}var c={getCareGiver:t,getCareGiverJobs:r,getJobProfile:a,updateCareGiver:i,updateInformation:o,updateCareGiverServices:s,getMessages:n,sendMessageToJob:u};return c}])}();