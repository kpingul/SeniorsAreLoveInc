!function(){"use strict";angular.module("CGDashBoard").controller("CGDashBoardCtrl",["$scope","$http","$timeout","$location",function(e,t,a,i){e.informationSubmitted=!1,e.aboutSubmitted=!1,e.expSubmitted=!1,e.skillsExpSubmitted=!1,e.accountSubmitted=!1,e.photoSubmitted=!1,e.init=function(a){var i=JSON.parse(a);t.get("/api/caregiver/"+i).then(function(t){e.user=t.data,console.log(e.user)}),t.get("/api/caregiverJobs").then(function(t){e.caregiverJobs=t.data,console.log(e.caregiverJobs)})},e.updateInformation=function(o){var r={gender:o,contact:{address:e.user.contact.address,city:e.user.contact.city,zipCode:e.user.contact.zipCode}};t.post("/api/caregiver/"+e.user._id,r).then(function(t){e.informationSubmitted=!0,a(function(){e.informationSubmitted=!1,e.user=t.data,i.path("/profile"),e.$apply()},300)}),console.log(r)},e.updateAbout=function(){var o={about:e.user.about};t.post("/api/caregiver/"+e.user._id,o).then(function(t){e.aboutSubmitted=!0,a(function(){e.aboutSubmitted=!1,e.user=t.data,i.path("/profile"),e.$apply()},300)})},e.updateExperience=function(){var o={yrsExp:e.user.yrsExp,title:e.user.profExp.title,employer:e.user.profExp.employer,start:e.user.profExp.start,end:e.user.profExp.end,desc:e.user.profExp.desc};t.post("/api/caregiver/experience/"+e.user._id,o).then(function(t){e.expSubmitted=!0,a(function(){e.expSubmitted=!1,e.user=t.data,i.path("/profile"),e.$apply()},300)})},e.updateAccount=function(){var o={fName:e.user.fName,lName:e.user.lName,email:e.user.email,phone:e.user.phone};t.post("/api/caregiver/"+e.user._id,o).then(function(t){e.accountSubmitted=!0,a(function(){e.accountSubmitted=!1,e.user=t.data,i.path("/profile"),e.$apply()},300)})},e.updateSkillsExp=function(){var o={hourRate:e.user.hourRate,careType:e.user.careType,skills:e.user.skills};t.post("/api/caregiver/services/"+e.user._id,o).then(function(t){e.skillsExpSubmitted=!0,a(function(){e.skillsExpSubmitted=!1,e.user=t.data,i.path("/profile"),e.$apply()},300)})},e.addSkill=function(t){""!=t&&(e.user.skills.push(t),e.user.newSkill="")},e.removeSkill=function(t){e.user.skills.splice(t,1)},e.uploadPhoto=function(o){var r=o,n=new FormData;n.append("file",r),e.photoSubmitted=!0,t.post("/api/images",n,{transformRequest:angular.identity,headers:{"Content-Type":void 0}}).then(function(o){if(o){var r={cgImageUrl:o.data.path};t.post("/api/caregiver/"+e.user._id,r).then(function(t){a(function(){e.photoSubmitted=!1,e.user=t.data,i.path("/profile"),e.$apply()},0)})}return o})}}]).controller("CaregiverJobProfile",["$scope","$http","$stateParams",function(e,t,a){t.get("/api/family/"+a.id).then(function(t){e.caregiverJob=t.data})}]).controller("MessageJob",["$scope","$http","$stateParams","$timeout","$location",function(e,t,a,i,o){e.messageSubmitted=!1,e.jobId=a.id,e.sendMessage=function(){var r={fromId:e.$parent.user._id,fromFName:e.$parent.user.fName,fromLName:e.$parent.user.lName,to:a.id,message:e.message};console.log(r),t.post("/api/caregiverjob/message/"+a.id,r).then(function(t){e.messageSubmitted=!0,i(function(){e.messageSubmitted=!1,o.path("/profile"),e.$apply()},300)})}}])}();