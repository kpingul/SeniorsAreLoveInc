!function(){"use strict";angular.module("CGDashBoard").controller("CGDashBoardCtrl",["$scope","$http","$timeout","$location",function(e,t,i,a){e.workExp2=!1,e.informationSubmitted=!1,e.aboutSubmitted=!1,e.expSubmitted=!1,e.skillsExpSubmitted=!1,e.accountSubmitted=!1,e.photoSubmitted=!1,e.init=function(i){var a=JSON.parse(i);t.get("/api/caregiver/"+a).then(function(t){e.user=t.data}),t.get("/api/caregiverJobs").then(function(t){e.activeJobs=_.where(t.data)})},e.updateInformation=function(r){var o={cgActive:e.user.cgActive,gender:r,contact:{address:e.user.contact.address,city:e.user.contact.city,zipCode:e.user.contact.zipCode}};t.post("/api/caregiver/"+e.user._id,o).then(function(t){e.informationSubmitted=!0,i(function(){e.informationSubmitted=!1,e.user=t.data,a.path("/profile"),e.$apply()},300)})},e.updateAbout=function(){var r={about:e.user.about};t.post("/api/caregiver/"+e.user._id,r).then(function(t){e.aboutSubmitted=!0,i(function(){e.aboutSubmitted=!1,e.user=t.data,a.path("/profile"),e.$apply()},300)})},e.updateExperience=function(){var r={yrsExp:e.user.yrsExp,title:e.user.profExp.title,employer:e.user.profExp.employer,start:e.user.profExp.start,end:e.user.profExp.end,desc:e.user.profExp.desc};t.post("/api/caregiver/experience/"+e.user._id,r).then(function(t){e.expSubmitted=!0,i(function(){e.expSubmitted=!1,e.user=t.data,a.path("/profile"),e.$apply()},300)})},e.updateAllExperience=function(){var r={yrsExp:e.user.yrsExp,workExp:e.user.workExp};t.post("/api/caregiver/"+e.user._id,r).then(function(t){e.expSubmitted=!0,i(function(){e.expSubmitted=!1,e.user=t.data,a.path("/profile"),e.$apply()},300)})},e.updateAccount=function(){var r={fName:e.user.fName,lName:e.user.lName,email:e.user.email,phone:e.user.phone};t.post("/api/caregiver/"+e.user._id,r).then(function(t){e.accountSubmitted=!0,i(function(){e.accountSubmitted=!1,e.user=t.data,a.path("/profile"),e.$apply()},300)})},e.updateSkillsExp=function(){var r={hourRate:e.user.hourRate,careType:e.user.careType,skills:e.user.skills};t.post("/api/caregiver/services/"+e.user._id,r).then(function(t){e.skillsExpSubmitted=!0,i(function(){e.skillsExpSubmitted=!1,e.user=t.data,a.path("/profile"),e.$apply()},300)})},e.addSkill=function(t){""!=t&&(e.user.skills.push(t),e.user.newSkill="")},e.removeSkill=function(t){e.user.skills.splice(t,1)}}]).controller("CaregiverJobProfile",["$scope","$http","$stateParams",function(e,t,i){t.get("/api/family/"+i.id).then(function(t){e.caregiverJob=t.data})}]).controller("MessageJob",["$scope","$http","$stateParams","$timeout","$location",function(e,t,i,a,r){e.messageSubmitted=!1,e.jobId=i.id,e.sendMessage=function(){var o={fromId:e.$parent.user._id,fromFName:e.$parent.user.fName,fromLName:e.$parent.user.lName,to:i.id,message:e.message};t.post("/api/caregiverjob/message/"+i.id,o).then(function(t){e.messageSubmitted=!0,a(function(){e.messageSubmitted=!1,r.path("/profile"),e.$apply()},300)})}}])}();